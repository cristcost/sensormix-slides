<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="all" href="theme/css/svg.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<svg>
  <defs>
    <filter id="box-shadow-filter" x="0" y="0">
      <feGaussianBlur stdDeviation="5"/>
      <feOffset dx="10" dy="10"/>
    </filter>
    <marker id="arrow" orient="auto" refX="0" refY="0" style="stroke-linecap:butt;overflow:visible">
      <path 
      d="M 0.5,0 -5,3 -5,-3 z" />
    </marker>
  </defs>
</svg>

<slides class="layout-widescreen">
  
  <slide class="logoslide nobackground">
    <article class="flexbox vcenter">
      <span><img src="images/gdg_firenze_logo.png"></span>
    </article>
  </slide>

  <slide class="title-slide segue nobackground">
    <aside class="gdbar"><img src="images/logo_sensormix_c.png"></aside>
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Chi Siamo</h2>
    </hgroup>
    <article class="flexbox vcenter">
      <svg height="496" width="780">
        <g transform="translate(193,248)">
          <g>
            <text class="who-we-are-text" filter="url(#box-shadow-filter)">Cristiano</text>
            <text class="who-we-are-text">Cristiano</text>
            <animateMotion begin="0s" dur="25s" path="m 0,0 c 0,-61.84 88.02,-111.98 196.60,-111.98 108.58,0 196.60,50.13 196.60,111.98 0,61.84 -88.02,111.98 -196.60,111.98 C 88.02,111.98 0,61.84 0,0 z" repeatCount="indefinite"/>
          </g>
          <g>
            <text class="who-we-are-text" filter="url(#box-shadow-filter)">Giuseppe</text>
            <text class="who-we-are-text">Giuseppe</text>
            <animateMotion begin="5s" dur="25s" path="m 0,0 c 0,-61.84 88.02,-111.98 196.60,-111.98 108.58,0 196.60,50.13 196.60,111.98 0,61.84 -88.02,111.98 -196.60,111.98 C 88.02,111.98 0,61.84 0,0 z" repeatCount="indefinite"/>
          </g>
          <g>
            <text class="who-we-are-text" filter="url(#box-shadow-filter)">Michele</text>
            <text class="who-we-are-text">Michele</text>
            <animateMotion begin="10s" dur="25s" path="m 0,0 c 0,-61.84 88.02,-111.98 196.60,-111.98 108.58,0 196.60,50.13 196.60,111.98 0,61.84 -88.02,111.98 -196.60,111.98 C 88.02,111.98 0,61.84 0,0 z" repeatCount="indefinite"/>
          </g>
          <g>
            <text class="who-we-are-text" filter="url(#box-shadow-filter)">Sergio</text>
            <text class="who-we-are-text">Sergio</text>
            <animateMotion begin="15s" dur="25s" path="m 0,0 c 0,-61.84 88.02,-111.98 196.60,-111.98 108.58,0 196.60,50.13 196.60,111.98 0,61.84 -88.02,111.98 -196.60,111.98 C 88.02,111.98 0,61.84 0,0 z" repeatCount="indefinite"/>
          </g>
          <g>
            <text class="who-we-are-text" filter="url(#box-shadow-filter)">Stefano</text>
            <text class="who-we-are-text">Stefano</text>
            <animateMotion begin="20s" dur="25s" path="m 0,0 c 0,-61.84 88.02,-111.98 196.60,-111.98 108.58,0 196.60,50.13 196.60,111.98 0,61.84 -88.02,111.98 -196.60,111.98 C 88.02,111.98 0,61.84 0,0 z" repeatCount="indefinite"/>
          </g>
        </g>
      </svg>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Perchè lo facciamo</h2>
    </hgroup>
    <article class="flexbox vcenter">
      <img style="height:100%" src="images/palten_book.jpg" class="shadow"
        alt="Programming all life to earn nothing. The pratical guide." 
        title="Programming all life to earn nothing. The pratical guide.">
    </article>
  </slide>

   <slide>
    <hgroup>
      <h2>Sommario</h2>
    </hgroup>
    <article>
      <ul>
        <li class="yellow3"><b>Introduzione ad OSGi e ServiceMix</b></li>
        <li class="blue3"><b>Introduzione ad Apache Camel</b></li>
        <li class="red3"><b>Utilizzare GWT su ServiceMix</b></li>
        <li class="green3"><b>SensorMix: Architettura di esempio</b></li>
        <li class="gray4"><b>Cool Facts: perchè ci piace questa architettura</b></li>
      </ul>
    </article>
  </slide>




  <!-- Introduzione a OSGi e Servicemix -->
  <slide class="segue back-yellow nobackground">
    <aside class="gdbar"><img src="images/logo_sensormix_c.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Introduzione a OSGi e Servicemix</h2>
      <h3>Ovvero un approccio modulare per backend SOA</h3>
    </hgroup>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>OSGi: questo sconosciuto</h2>
    </hgroup>
    <article>
      <ul>
        <li>OSGi: Open Service Gateway initiative</li>
        <li>OSGi Alliance: organizzazione fondata nel 1999 da <a href="http://it.wikipedia.org/wiki/Ericsson">Ericsson</a>, <a href="http://it.wikipedia.org/wiki/IBM">IBM</a>, <a href="http://it.wikipedia.org/wiki/Oracle">Oracle</a> e altri</li>
        <li>OSGi Framework: è un layer di modularità per la piattaforma Java</li>
      </ul>
      <p>Il nucleo delle specifiche definisce la gestione del modello del ciclo di vita del software, i moduli (chiamati bundles), un service registry e un ambiente di esecuzione.</p>
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Una Metafora:</h2>
      <h3>Pensate ai servizi di Windows o demoni Unix ma completamente Java</h3>
    </hgroup>
    <article class="flexbox">
      <div class="build fade">

        <img style="position: absolute;left:50%;margin-left:-420px;margin-top:-30px;" src="images/servicemix_windows_services.png" alt="OSGi as Windows Services" title="OSGi as Windows Services" />
        <img style="position: absolute;left:50%;margin-left:-310px;margin-top:20px;" src="images/servicemix_linux_daemons.png" alt="OSGi as Unix Daemons" title="OSGi as Unix Daemons" />
        <img style="position: absolute;left:50%;margin-left:-255px;" src="images/servicemix_felix.png" alt="OSGi as a platform of services in Java" title="OSGi as a platform of services in Java" />

      </div>
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Perchè nasce OSGi</h2>
    </hgroup>
    <article>
      <p>OSGi nasce con lo scopo di creare sistemi embedded per mercati residenziali, automotive e M2M. In questi contesti è spesso necessario comunicare con i devices attraverso protocolli differenti.</p>
      <p>Il fine, quindi, era quello di fornire un modello di programmazione capace di realizzare servizi end-to-end creando uno strato di astrazione che unificasse i differenti protocolli.</p>
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Perchè si espande</h2>
    </hgroup>
    <article class="flexbox vleft auto-fadein smaller">
      <q>
        We’ve all used development platforms in the past, such as Java Enterprise Edition (JEE), and even though there have been great advances in this industry, we’re still building large complex systems, which are hard to develop, maintain, and extend.
      </q>
      <div class="author">
        <br/>Alexandre de Castro Alves<br/>
        OSGi in Depth - Manning, <br/>
        pagina 1, riga 1
      </div>
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Implementazioni OSGi</h2>
    </hgroup>
    <article class="bigger">
      <p>Esistono diverse implementazioni di OSGi. Quelle più complete sono:</p>
      <ul>
        <li>Apache Felix</li>
        <li>Eclipse Equinox</li>
        <li>Knopflerfish</li>
      </ul>
    </article>
  </slide>
 
   <slide class="header-yellow">
    <hgroup>
      <h2>Come è fatto un framework OSGi</h2>
    </hgroup>
    <article>
      <svg style="float:right;" height="496" width="370">
        <g>
          <g transform="translate(160,10)">
            <rect x="-150" height="240" class="diagram-block-shadow" width="300"/>
            <rect x="-150" height="80" class="diagram-block" width="300"/>
            <text y="55">
              <tspan class="diagram-block-text">Service</tspan>
            </text>
          </g>
          <g transform="translate(160,90)">
            <rect x="-150" height="80" class="diagram-block" width="300"/>
            <text y="55">
              <tspan class="diagram-block-text">Lifecycle</tspan>
            </text>
          </g>
          <g transform="translate(160,170)">
            <rect x="-150" height="80" class="diagram-block" width="300"/>
            <text y="55">
              <tspan class="diagram-block-text">Module</tspan>
            </text>
          </g>
        </g>
      </svg>
      <p>Il framework può essere rappresentato con tre layer:</p>
      <ul class="build fade">
        <li>Il <b>module</b> layer definisce il concetto di modulo OSGi: il Bundle</li>
        <li>Il <b>lifecycle</b> layer definisce come i bundles sono dinamicamente installati e gestiti nel framework OSGi</li>
        <li>Il <b>service</b> layer supporta e promuove un modello di sviluppo di applicazioni flessibile che incapsula concetti resi di uso comune dal service-oriented programming</li>
      </ul>
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Il “Module layer”</h2>
    </hgroup>
    <article>
      <img style="width:370px;float:right;" src="images/servicemix_image_2.png" alt="OSGi Bundles" title="OSGi Bundles" />
      <p>Il cuore del module layer è il <b>Bundle</b>.</p>
      <p>Un Bundle è un JAR che contiene metadati extra (manifest).</p>

      <div class="build">
        <p>A differenza dei JAR il bundle ha:</p>
        <ul>
          <li>un classpath “ristretto” al solo bundle</li>
          <li>un manifest più ricco</li>
        </ul>
        <p>Grazie al manifest è possibile estendere la visibilità del classpath dichiarando esplicitamente le proprie dipendenze</p>
      </div>
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Il manifest OSGi</h2>
    </hgroup>
    <article>
      <p>Nel manifest viene specificato anche:</p>
      <ul>
        <li>L’identificazione e la descrizione</li>
        <li>Il classloading</li>
        <li>L’activazione</li>
      </ul>
      <p>Esempi:</p>
    </article>
  </slide>
<slide class="header-yellow">
    <hgroup>
      <h2>Il manifest OSGi</h2>
      <h3>Manifest di un semplice JAR compilato con maven</h3>
    </hgroup>
    <article class="smaller">
      <pre class="prettyprint" data-lang="manifest.mf">
Manifest-Version: 1.0
Build-Jdk: 1.7.0_40
Built-By: gdg-firenze
Created-By: Apache Maven
      </pre>
    </article>
  </slide>
  <slide class="header-yellow">
    <hgroup>
      <h2>Il manifest OSGi</h2>
      <h3>Manifest di un Bundle</h3>
    </hgroup>
    <article class="smaller">
      <pre class="prettyprint" data-lang="manifest.mf">
Manifest-Version: 1.0
<b>Bnd-LastModified: 1386750447262</b>
Build-Jdk: 1.7.0_40
Built-By: gdg-firenze
<b>Bundle-ManifestVersion: 2</b>
<b>Bundle-Name: GDG Firenze :: Sensormix :: Example Bundle</b>
<b>Bundle-SymbolicName: example-bundle</b>
<b>Bundle-Vendor: GDG Firenze :: Sensormix Team</b>
<b>Bundle-Version: 1.0.0.SNAPSHOT</b>
Created-By: Apache Maven Bundle Plugin
<b>Export-Package: 
 com.google.developers.gdgfirenze.model;version="1.0.0.SNAPSHOT",
 com.google.developers.gdgfirenze.osgi;version="1.0.0.SNAPSHOT",
 com.google.developers.gdgfirenze.service;version="1.0.0.SNAPSHOT"</b>
<b>Import-Package: 
 javax.jws,javax.jws.soap,javax.xml.bind.annotation,javax.xml.ws</b>
<b>Tool: Bnd-1.50.0</b>
      </pre>
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Il “Lifecycle layer”</h2>
      <h3>Il lifecycle layer ha due scopi:</h3>
    </hgroup>
    <article>
    <p>Esternamente gestisce il ciclo di vita del bundle.</p>
    <img src="images/servicemix_image_3.png" alt="OSGi Lifecycle" title="OSGi Lifecycle" />
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Il “Lifecycle layer”</h2>
      <h3>Il lifecycle layer ha due scopi:</h3>
    </hgroup>
    <article>
      <p>Internamente definisce Bundle Activator </p>
      <img src="images/servicemix_image_4.png" alt="OSGi Bundle Activator" title="OSGi Bundle Activator" />
      <div class="build"><p>= public static void main(String[] args)</p></div>
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Il “Service layer”</h2>
    </hgroup>
    <article>
      <p>L’OSGi service layer promuove l’approccio basato su interface ed in particolare la separazione tra interfacce e implementazioni.</p>
      <p>I Servizi OSGi sono interfacce Java che rappresentano un contratto tra il service provider e i service clients.</p>
      <img src="images/servicemix_image_5.png" alt="OSGi Bundle Activator" title="OSGi Bundle Activator" />
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>OSGi: la Service Platform</h2>
    </hgroup>
    <article>
      <img style="width:370px;float:right;" src="images/servicemix_image_6.png" alt="OSGi Service Platform" title="OSGi Service Platform" />
      <p>L’OSGi definisce un set minimo di servizi per agevolare lo sviluppo di applicazioni modulari</p>
      <ul>
        <li>Cofiguration Admin (hot configuration)</li>
        <li>Event Admin</li>
        <li>Console Admin</li>
        <li>Log Service</li>
        <li>Blueprint component framework</li>
      </ul>
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Karaf: un OSGi container</h2>
    </hgroup>
    <article>
      <p>Karaf è un OSGi container in cui sono deployati bundles (e servizi) aggiuntivi per fornire ulteriori funzionalità tra cui Hot deployment, Dynamic configuration, Logging System, Extensible Shell console (SSH)</p>
      <p>Karaf è un chiaro esempio di architettura basata su OSGi</p>
      <img src="images/servicemix_image_7.png" alt="Apache Karaf Architecture" title="Apache Karaf Architecture" />
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>Servicemix: un ESB su OSGi</h2>
    </hgroup>
    <article class="smaller">
      <img style="width:370px;float:right;" src="images/servicemix_image_8.png" alt="OSGi Service Platform" title="OSGi Service Platform" />
      <p>Le principali funzionalità di Servicemix sono:</p>
      <ul>
        <li>reliable messaging with <a href="http://activemq.apache.org/">Apache ActiveMQ</a></li>
        <li>messaging, routing and Enterprise Integration Patterns with <a href="http://camel.apache.org">Apache Camel</a></li>
        <li>WS-\* and RESTful web services with <a href="http://cxf.apache.org">Apache CXF</a></li>
        <li>OSGi-based server runtime powered by <a href="http://karaf.apache.org">Apache Karaf</a></li>
      </ul>

      <p>Altre funzionalità offerte da Smx:</p>
      <ul>
        <li>loosely coupled integration between all the other components with Apache ServiceMix NMR including rich Event, Messaging and Audit API</li>
        <li>complete WS-BPEL engine with <a href="http://ode.apache.org">Apache ODE</a></li>
      </ul>

    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>OSGi e Spring</h2>
      <h3>Uso di Spring dentro a Karaf/Servicemix</h3>
    </hgroup>
    <article class="smaller">
      <p>Lo springframework fornisce molte features interessanti (dependency injection, ORM, AOP,...)</p>
      <p>Lo Spring Deployer riconosce i file Spring all'interno del folder META-INF/spring di un Jar, e ne istanzia i bean che vi sono definiti, senza necessità di utilizzare le API OSGi</p>

<pre class="prettyprint" data-lang="Spring">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; 
  xmlns:context=&quot;http://www.springframework.org/schema/context&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 
  xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;

  &lt;bean id=&quot;consumer&quot; class=&quot;com.myapplication.HelloWorldConsumer&quot; 
    <b>destroy-method=&quot;osgiDestroy&quot; init-method=&quot;osgiInit&quot;</b>/&gt;
    
&lt;/beans&gt;
</pre>
    </article>
  </slide>

  <slide class="header-yellow">
    <hgroup>
      <h2>OSGi e Spring</h2>
      <h3>Spring DM</h3>
    </hgroup>
    <article class="smaller">
      <p>Spring DM permette di utilizzare servizi OSGi da Spring in modo trasparente.</p>
<pre class="prettyprint" data-lang="Spring DM">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 
  <b>xmlns:osgi=&quot;http://www.springframework.org/schema/osgi&quot;</b>
  xmlns:util=&quot;http://www.springframework.org/schema/util&quot; 
  xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
  <b>xsi:schemaLocation=&quot;http://www.springframework.org/schema/osgi 
         http://www.springframework.org/schema/osgi/spring-osgi.xsd&quot;&gt;</b>

  <b>&lt;osgi:service ref=&quot;eventService&quot;
      interface=&quot;com.myapplication.HelloWorldService&quot; /&gt;</b>

&lt;/beans&gt;
</pre>
    </article>
  </slide>

  <!-- Introduzione Camel -->
  <slide class="segue back-blue nobackground">
    <aside class="gdbar"><img src="images/logo_sensormix_c.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Introduzione ad Apache Camel</h2>
      <h3>Ovvero un modo agile per interfacciarsi a sistemi eterogenei</h3>
    </hgroup>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>“Integrare”</h2>
    </hgroup>
    <article class="build fade">
      <p>Cosa si intende quando parliamo di integrazione?</p>
      <p>Si intende trovare una soluzione al seguente problema:</p>
      <p>“Come posso far funzionare insieme molteplici applicazioni attraverso lo scambio di informazioni?”</p>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Enterprise Integration Patterns</h2>
    </hgroup>
    <article>
      <p>Gli Enterprise Integration Patters offrono soluzioni per affrontare il precedente problema.</p>
      <p>Cosa sono gli EIP?</p>
    </article>
  </slide>

  <slide class="fill nobackground" style="background-image: url(images/eipbook.jpg)">
    <hgroup>
      <h2 class="white">Un libro!</h2>
    </hgroup>
    <footer><a class="source white" href="http://www.eaipatterns.com/">Gregor Hohpe and Bobby Woolf<br/>Addison-Wesley 2003</a></footer>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>EIP Importanti</h2>
    </hgroup>
    <article>
      <dl style="font-size: 0.65em;">
        <dt>Message Channel:</dt>
          <dd style="font-size: 0.65em;">How does one application communicate with another using messaging?</dd>
        <dt>Message:</dt>
          <dd style="font-size: 0.65em;">How can two applications connected by a message channel exchange a piece of information?</dd>
        <dt>Message Router:</dt>
          <dd style="font-size: 0.65em;">How can you decouple individual processing steps so that messages can be passed to different filters depending on a set of conditions?</dd>
        <dt>Message Translator:</dt>
          <dd style="font-size: 0.65em;"> How can systems using different data formats communicate with each other using messaging?</dd>
        <dt>Message Endpoint:</dt>
          <dd style="font-size: 0.65em;">How does an application connect to a messaging channel to send and receive messages?</dd>
        <dt>Dead Letter Channel:</dt>
          <dd style="font-size: 0.65em;">What will the messaging system do with a message it cannot deliver?</dd>
        <dt>Message Bus:</dt>
          <dd style="font-size: 0.65em;"> What is an architecture that enables separate applications to work together, but in a decoupled fashion such that applications can be easily added or removed without affecting the others?</dd>
        <dt>Command Message:</dt>
          <dd style="font-size: 0.65em;">How can messaging be used to invoke a procedure in another application?</dd>
        <dt>Document Message:</dt>
          <dd style="font-size: 0.65em;">How can messaging be used to transfer data between applications?</dd>
        <dt>Event Message:</dt>
          <dd style="font-size: 0.65em;">How can messaging be used to transmit events from one application to another?</dd>
        <dt>Request-Reply:</dt>
          <dd style="font-size: 0.65em;">When an application sends a message, how can it get a response from the receiver?</dd>
        <dt>Canonical Data Model:</dt>
          <dd style="font-size: 0.65em;">How can you minimize dependencies when integrating applications that use different data formats?</dd>
      </dl>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Come si può fare integrazione?</h2>
    </hgroup>
    <article>
      <p>I principali metodi tramite cui avviene integrazione sono:</p>
      <ul class="build">
        <li>Scambio di file
          <div style="position:absolute;right:0px;top:0px;background-color:white;width:345px;height:153px;"><img src="images/camel_eip_file.gif" alt="EIP File Transfer" title="EIP File Transfer" /></div></li>
        <li>Database condiviso
          <div style="position:absolute;right:0px;top:0px;background-color:white;width:345px;height:153px;"><img src="images/camel_eip_db.gif" alt="EIP Shared DB" title="EIP Shared DB" /></div></li>
        <li>Remote Procedure Invocation
          <div style="position:absolute;right:0px;top:0px;background-color:white;width:345px;height:153px;"><img src="images/camel_eip_rmi.gif" alt="EIP Remote Procedure Invocation" title="EIP Remote Procedure Invocation" /></div></li>
        <li>Messaging
          <div style="position:absolute;right:0px;top:0px;background-color:white;width:345px;height:153px;"><img src="images/camel_eip_messaging.gif" alt="EIP Messaging" title="EIP Messaging" /></div></li>
      </ul>
      <div class="build"><p>Gli EIP si focalizzano sulla integrazione via “messaging” e definiscono una notazione per rappresentare le soluzioni di integrazione.</p></div>
    </article>
  </slide>

  <slide class="fill nobackground" style="background-image: url(images/eipbookcover.jpg)">
    <hgroup>
      <h2 class="white">Notazione EIP</h2>
    </hgroup>
    <article class="build flexbox vcenter ">
      <div>
        <img src="images/camel_image_1.png" style="height:560px;margin-top:-50px;" alt="EIP Notation" title="EIP Notation" />
        
        <footer><a class="source white" href="http://www.eaipatterns.com/toc.html">http://www.eaipatterns.com/toc.html</a></footer>
      <div>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Soluzioni con EIP</h2>
    </hgroup>
     <article class="flexbox vcenter">
      <div>
        <img src="images/camel_eip_1.png" alt="Example of EIP" title="Example of EIP" />
      </div>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Soluzioni con EIP</h2>
    </hgroup>
     <article class="flexbox vcenter">
      <div>
        <img src="images/camel_eip_2.png" alt="Example of EIP" title="Example of EIP" />
      </div>
    </article>
  </slide>


  <slide class="header-blue">
    <hgroup>
      <h2>Soluzioni con EIP</h2>
    </hgroup>
     <article class="flexbox vcenter">
      <div>
        <img src="images/sensormix_cdm_eip.png" alt="Example of EIP" title="Example of EIP" />
        <div class="build">
          <h3>Attenti a questa qui!</h3>
        </div>
      </div>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Come implementare facilmente EIP?</h2>
      <h3>(domanda retorica)</h3>
    </hgroup>
    <article class="build">
      <p>Integrare è però difficile perchè esiste una vasta eterogeneità di protocolli, interfacce e formati.</p>
      <p>Come si possono implementare su una piattaforma Java gli Enterprise Integration Pattern?</p>
      <div>
        <p>con</p>
        <q>Apache Camel</q>
        <div class="build">
          <span><b>C</b>oncise</span>
          <span><b>A</b>pplication</span>
          <span><b>M</b>essaging</span>
          <span><b>E</b>xchange</span>
          <span><b>L</b>anguage</span>
        </div>
      </div>
 
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Apache Camel</h2>
    </hgroup>
    <article class="build">
      <p>Apache Camel è un framework di intrgrazione open-sorce versatile basato sugli Enterprise Integration Patterns del libro di Hohpe e Woolf.</p>
      <p>Include un vasto insieme di componenti per funzionare con molti protocolli di trasporto e formati dati e permette di definire regole di instradamento e intermediazione attraverso l’uso di "domain-specific language".</p>
      <p>...si presta talmente bene alla integrazione che ServiceMix, dalla versione 3 alla 4, ha abbandonato la tecnologia JBI per adottare un nuovo approccio alla integrazione basato su Camel e OSGi.</p>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Esempio: Content Based Router</h2>
    </hgroup>
    <article class="smaller build">
      <img style="width:50%;" src="images/camel_eip_3.png" alt="Content Based Router" title="Content Based Router" />
      <div>
        <q>
          from <b>newOrder</b><br/>
          &nbsp;&nbsp;choice<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;when <b>isWidget</b> to <b>widget</b><br/>
          &nbsp;&nbsp;&nbsp;&nbsp;otherwise to <b>gadget</b>
        </q>
      </div>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Content Based Router in Java DSL</h2>
    </hgroup>
    <article class="smaller">
      <div style="float:right;">
          from <b>newOrder</b><br/>
          &nbsp;&nbsp;choice<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;when <b>isWidget</b> to <b>widget</b><br/>
          &nbsp;&nbsp;&nbsp;&nbsp;otherwise to <b>gadget</b>
      </div>
      <img style="width:50%;" src="images/camel_eip_3.png" alt="Content Based Router" title="Content Based Router" />

<pre class="prettyprint" data-lang="java dsl">
public class MyRoute extends RouteBuilder {

  public void configure() throws Exception {
    <b>from</b>(&quot;<b>activemq:queue:newOrder</b>&quot;)
      .<b>choice</b>()
        .<b>when</b>(xpath(&quot;<b>/order/product = 'widget'</b>&quot;))
          .<b>to</b>(&quot;<b>activemq:queue:widget</b>&quot;)
        .<b>otherwise</b>()
          .<b>to</b>(&quot;<b>activemq:queue:gadget</b>&quot;)
      .end();
  }
}
</pre>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Content Based Router in Spring XML</h2>
    </hgroup>
    <article class="smaller">
      <div style="float:right;">
          from <b>newOrder</b><br/>
          &nbsp;&nbsp;choice<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;when <b>isWidget</b> to <b>widget</b><br/>
          &nbsp;&nbsp;&nbsp;&nbsp;otherwise to <b>gadget</b>
      </div>
      <img style="width:50%;" src="images/camel_eip_3.png" alt="Content Based Router" title="Content Based Router" />
<pre class="prettyprint" data-lang="spring xml">
&lt;camelContext xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;
  &lt;route&gt;
    &lt;<b>from</b> uri=&quot;<b>activemq:queue:newOrder</b>&quot;/&gt;
    &lt;<b>choice</b>&gt;
      &lt;<b>when</b>&gt;
        &lt;xpath&gt;<b>/order/product = &apos;widget&apos;</b>&lt;/xpath&gt;
        &lt;<b>to</b> uri=&quot;<b>activemq:queue:widget</b>&quot;/&gt;
      &lt;/when&gt;
      &lt;<b>otherwise</b>&gt;
        &lt;<b>to</b> uri=&quot;<b>activemq:queue:gadget</b>&quot;/&gt;
      &lt;/otherwise&gt;
    &lt;/choice&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;
</pre>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Camel: componenti</h2>
      <h3>162 componenti elencati su <a href="http://camel.apache.org/components.html">camel.apache.org/components.html</a></h3>
    </hgroup>
    <article class="smaller">
      <div style="height:460px;overflow:auto;margin-top:-30px;">
        <table>
          <tr><th></th><td class="highlight">ActiveMQ</td><td>ActiveMQ Broker</td><td>Activiti</td><td>AHC</td><td>AMQP</td><td>APNS</td><td>Atom</td><td>Avro</td></tr>
          <tr><th></th><td>AWS-CW</td><td>AWS-DDB</td><td>AWS-S3</td><td>AWS-SDB</td><td>AWS-SES</td><td>AWS-SNS</td><td>AWS-SQS</td><td>Bean</td></tr>
          <tr><th></th><td>Bean Validation</td><td>Browse</td><td>Cache</td><td>Class</td><td>CMIS</td><td>Cometd</td><td>Context</td><td>ControlBus</td></tr>
          <tr><th></th><td>CouchDB</td><td>Crypto</td><td class="highlight">CXF</td><td>CXF Bean </td><td>CXFRS</td><td>DataFormat</td><td>DataSet</td><td>Db4o</td></tr>
          <tr><th></th><td>Direct</td><td>Direct-VM</td><td>Disruptor</td><td>DNS</td><td>EJB</td><td>ElasticSearch</td><td>Esper</td><td>EventAdmin</td></tr>
          <tr><th></th><td>Exec</td><td>Facebook</td><td class="highlight">File</td><td>Flatpack</td><td>FOP</td><td>FreeMarker</td><td class="highlight">FTP</td><td>FTPS</td></tr>
          <tr><th></th><td>GAuth</td><td>Geocoder</td><td>GHttp</td><td>GLogin</td><td>GMail</td><td>GTask</td><td>Guava EventBus</td><td>Hazelcast</td></tr>
          <tr><th></th><td>HBase</td><td>HDFS</td><td>Hibernate</td><td>HL7</td><td class="highlight">HTTP</td><td>HTTP4</td><td>iBATIS</td><td>IMAP</td></tr>
          <tr><th></th><td>IMAPS</td><td>Infinispan</td><td>IRC</td><td>JavaSpace</td><td>JBI</td><td>JCIFS</td><td>jclouds</td><td>JCR</td></tr>
          <tr><th></th><td>JDBC</td><td class="highlight">Jetty</td><td>JGroups</td><td>JMS</td><td>JMX</td><td>JPA</td><td>Jsch</td><td>JT/400 </td></tr>
          <tr><th></th><td>Kestrel</td><td>Krati</td><td>Language</td><td>LDAP</td><td>Log</td><td>Lucene</td><td>MINA</td><td class="highlight">MINA2</td></tr>
          <tr><th></th><td>Mock</td><td>MongoDB</td><td>MQTT</td><td>MSV</td><td>Mustache</td><td>MVEL</td><td>MyBatis</td><td>Nagios</td></tr>
          <tr><th></th><td class="highlight">Netty</td><td>Netty HTTP</td><td>NMR</td><td>OptaPlanner</td><td>Pax-Logging</td><td>POP3</td><td>POP3S</td><td>Printer</td></tr>
          <tr><th></th><td>Properties</td><td>Quartz</td><td>Quartz2</td><td>Quickfix</td><td>RabbitMQ</td><td>RCode</td><td>Ref</td><td>Restlet</td></tr>
          <tr><th></th><td>RMI</td><td>RNC</td><td>RNG</td><td>Routebox</td><td>RSS</td><td>Salesforce</td><td>SAP NetWeaver</td><td>Scalate</td></tr>
          <tr><th></th><td>SEDA</td><td>SERVLET</td><td>SFTP</td><td>Sip</td><td>SJMS</td><td>Smooks</td><td>SMPP</td><td>SMTP</td></tr>
          <tr><th></th><td>SMTP</td><td>SNMP</td><td>Solr</td><td>Splunk</td><td>Spring Event</td><td>Spring LDAP</td><td>Spring Neo4j</td><td>Spring Redis</td></tr>
          <tr><th></th><td>Spring Web Services</td><td>SpringBatch</td><td>SpringIntegration</td><td>SQL</td><td>StAX</td><td>Stomp</td><td>Stream</td><td>StringTemplate</td></tr>
          <tr><th></th><td>Stub</td><td>Test</td><td>Timer</td><td>Twitter</td><td>Validation</td><td class="highlight">Velocity</td><td>Vertx</td><td>VirtualBox</td></tr>
          <tr><th></th><td class="highlight">VM</td><td>Weather</td><td>Websocket</td><td>XML Security </td><td>XMPP</td><td>XQuery</td><td class="highlight">XSLT</td><td>Yammer</td></tr>
          <tr><th></th><td>ZeroMQ</td><td>Zookeeper</td></tr>
        </table>
      </div>  
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Camel: data format</h2>
      <h3>25+ data format elencati su <a href="http://camel.apache.org/data-format.html">camel.apache.org/data-format.html</a></h3>
    </hgroup>
    <article>
      <table>
        <tr><th></th><td>Avro</td><td>Base64</td><td>BeanIO</td><td>Bindy</td><td>Castor</td></tr>
        <tr><th></th><td>Crypto</td><td>CSV</td><td>EDI</td><td>Flatpack DataFormat</td><td>GZip data format</td></tr>
        <tr><th></th><td>HL7 DataFormat</td><td class="highlight">JAXB</td><td>JiBX</td><td class="highlight">JSON</td><td>PGP</td></tr>
        <tr><th></th><td class="highlight">Protobuf</td><td class="highlight">Serialization</td><td>SOAP</td><td>String</td><td>XmlBeans</td></tr>
        <tr><th></th><td class="highlight">XmlJson</td><td>XMLSecurity DataFormat</td><td>XStream</td><td>Zip DataFormat</td><td>Zip File DataFormat</td></tr>
      </table>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Camel in Servicemix</h2>
    </hgroup>
    <article>
      <p>Una volta attivati i bundle di Camel su Karaf-Servicemix... </p>
      <div class="build">
        <img src="images/camel_image_3.png" alt="Camel Bundles in Servicemix" title="Camel Bundles in Servicemix" />
      </div>
    </article>
  </slide>

  <slide class="header-blue">
    <hgroup>
      <h2>Camel in Servicemix</h2>
    </hgroup>
    <article class="smaller">
      <p>...è possibile definire rotte direttamente
       nei file Spring XML, oppure utilizzare dei RouteBuilder in Java per avviare delle 
       applicazioni che usano Camel all’interno di ServiceMix.</p>
<div class="build">
<pre class="prettyprint" data-lang="Spring XML">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;&gt;

  &lt;camelContext xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;
   
    &lt;route&gt;
      &lt;from uri=&quot;jetty:http://0.0.0.0:8080/tellMeSomething&quot;/&gt;
      &lt;convertBodyTo type=&quot;java.lang.String&quot;/&gt;
      &lt;transform&gt;
        &lt;simple&gt;You say ${in.body}&lt;/simple&gt;
      &lt;/transform&gt;
      &lt;to uri=&quot;velocity:response.vm&quot; /&gt;
    &lt;/route&gt;

  &lt;/camelContext&gt;

&lt;/beans&gt;
</pre></div>

    </article>
  </slide>




  <!-- Usare GWT su Servicemix -->
  <slide class="segue back-red nobackground">
    <aside class="gdbar"><img src="images/logo_sensormix_c.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Segue Rosso</h2>
      <h3>Da usare per slide riguardanti GWT</h3>
    </hgroup>
  </slide>

  <slide class="header-red">
    <hgroup>
      <h2>Titolo red</h2>
      <h3>Sottotitolo</h3>
    </hgroup>
    <article>
      <p>Info</p>
      <ul class="build fade">
        <li>Punto 1</li>
        <li>Punto 2</li>
        <li>Punto 3</li>
      </ul>
    </article>
  </slide>

  <!-- TODO: Rimanenti su GWT -->

  <slide class="segue back-green nobackground">
    <aside class="gdbar"><img src="images/logo_sensormix_c.png"></aside>
    <hgroup class="auto-fadein">
      <h2>SensorMix</h2>
      <h3>Architettura di esempio basata su Servicemix, Camel e GWT</h3>
    </hgroup>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2>Come è composto SensorMix</h2>
      <h3>Architettura interna</h3>
    </hgroup>
    <article>
      <img style="position: absolute;left:50%;margin-left:-340px;margin-top:-50px;" src="images/sensormix_arc_1.png" alt="SensorMix: Architecture" title="SensorMix: Architecture" />
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2>Come è composto SensorMix</h2>
      <h3>Architettura esterna</h3>
    </hgroup>
    <article>
      <img style="position: absolute;left:50%;margin-left:-340px;margin-top:-50px;" src="images/sensormix_arc_2.png" alt="SensorMix: Interfaces" title="SensorMix: Interfaces" />
    </article>
  </slide>

  <slide class="header-green">
    <article class="flexbox vcenter">
      <div>
        <h2 style="font-size:10em;">Demo</h2>
      </div>
    </article>
  </slide>

  <!-- Canonical Data Model -->
  <slide class="segue header-green no-back">
    <aside class="gdbar big-green"><img src="images/sensormix_focus_cdm.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Data Model Bundle</h2>
    </hgroup>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> Il Canonical Data Model EIP</h2>
    </hgroup>
    <article>
      <p>Dal libro EIP:</p>
      <div class="build fade">
        <p>“I am designing several applications to work together through Messaging. Each application has its own internal data format.”</p>
        <p>“How can you minimize dependencies when integrating applications that use different data formats?”</p>
        <img src="images/sensormix_cdm_problem.png" alt="Canonical Data Model problem" title="Canonical Data Model problem" />
      </div>
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> Il Canonical Data Model EIP</h2>
    </hgroup>
    <article class="flexbox vcenter">
      <div>
        <img src="images/sensormix_cdm_eip.png" alt="Example of EIP" title="Example of EIP" />
      </div>
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2>Il nostro approccio al CDM</h2>
    </hgroup>
    <article class="build">
      <p>A noi piace l’approccio <b>Java first</b>:</p>
      <ul>
        <li>Modello dati: <b>POJO</b></li>
        <li>Modello servizi: <b>Interfacce Java</b></li>
      </ul>
      <p>Usiamo annotazioni JaxB e JaxWS per generare dal nostro modello gli XML Schema e WSDL.</p>
      <div>
        <p>Troviamo che cominciare dagli oggetti sia più naturale, lineare e agile:</p>
        <ul class="build fade">
          <li>Lo XML Schema finale risulta più pulito</li>
          <li>Si può fare a meno della validazione XML 
            <ul><li>eccezioni Java = XML non valido</li></ul>
          </li>
          <li>Lavorare sulle classi Java è più veloce (per noi che siamo sviluppatori)</li>
        </ul>
      </div>
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> POJO annotati JaxB</h2>
    </hgroup>
    <article class="flexbox build fade smaller">
<pre class="prettyprint" data-lang="java">
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = &quot;SampleReport&quot;)
public class SampleReport implements Serializable {

  /** The sensor id. */
  @XmlAttribute(required = true, name = &quot;sensorId&quot;)
  @XmlSchemaType(name = &quot;anyURI&quot;)
  private String sensorId;

  /** The sample type. */
  @XmlAttribute(required = false, name = &quot;sampleType&quot;)
  private String sampleType;

  /** The daily sample reports. */
  @XmlElement(required = false, name = &quot;dailySampleReport&quot;)
  private List&lt;DailySampleReport&gt; dailySampleReports;

  // ...</pre>
      <img style="position: absolute; top: 100px; right: 50px;" src="images/sensormix_cdm_image_1.png" alt="POJO annotated JaxB" title="POJO annotated JaxB" />
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> Interfaccia annotata JaxWS</h2>
    </hgroup>
 <article class="flexbox build fade smaller">
<pre class="prettyprint" data-lang="java">
@WebService(name = &quot;SensormixService&quot;,
    targetNamespace = &quot;http://developers.google.com/gdgfirenze/ns/service&quot;)
@SOAPBinding(parameterStyle = ParameterStyle.WRAPPED, style = Style.DOCUMENT, use = Use.LITERAL)
public interface SensormixService {

  @WebMethod(action = &quot;urn:#listSensorsIds&quot;)
  @RequestWrapper(localName = &quot;listSensorsIdsIn&quot;,
      targetNamespace = &quot;http://developers.google.com/gdgfirenze/ns/service&quot;)
  @ResponseWrapper(localName = &quot;listSensorsIdsOut&quot;,
      targetNamespace = &quot;http://developers.google.com/gdgfirenze/ns/service&quot;)
  @WebResult(name = &quot;sensorId&quot;)
  List&lt;String&gt; listSensorsIds();

  @WebMethod(action = &quot;urn:#listSamplesTypes&quot;)
  @RequestWrapper(localName = &quot;listSamplesTypesIn&quot;,
      targetNamespace = &quot;http://developers.google.com/gdgfirenze/ns/service&quot;)
  @ResponseWrapper(localName = &quot;listSamplesTypesOut&quot;,
      targetNamespace = &quot;http://developers.google.com/gdgfirenze/ns/service&quot;)
  @WebResult(name = &quot;sampleType&quot;)
  List&lt;String&gt; listSamplesTypes();

  // ...</pre>
      <img style="position: absolute; top: 100px; right: 50px;" src="images/sensormix_cdm_image_2.png" alt="Interfaces annotated JaxWS" title="Interfaces annotated JaxWS" />
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> Utilizzo del CDM su GWT</h2>
    </hgroup>
    <article class="flexbox vcenter">
      <p>Infine, se si vuole usare il data model anche dentro un progetto GWT, basta aggiungere un modulo .gwt.xml:</p>
      <div class="build fade">
<pre class="prettyprint" data-lang="gwt xml">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!-- When updating your version of GWT, you should also update this DTD reference, 
        so that your app can take advantage of the latest GWT module capabilities. --&gt;
&lt;!DOCTYPE module PUBLIC &quot;-//Google Inc.//DTD Google Web Toolkit 2.5.1//EN&quot;
  &quot;http://google-web-toolkit.googlecode.com/svn/tags
  /2.5.1/distro-source/core/src/gwt-module.dtd&quot;&gt;
&lt;module&gt;

        &lt;!-- Specify the paths for translatable code --&gt;
        &lt;source path='model' /&gt;
        &lt;source path='service' /&gt;

&lt;/module&gt;</pre>
        <img style="position: absolute; top: 100px; right: 50px;" src="images/sensormix_cdm_image_3.png" alt="Interfaces annotated JaxWS" title="Interfaces annotated JaxWS" />
      </div>
    </article>
  </slide>

  <!-- Data Service -->
  <slide class="segue header-green no-back">
    <aside class="gdbar big-green"><img src="images/sensormix_focus_dataservice.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Data Service Bundle</h2>
    </hgroup>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> Il bundle dataservice</h2>
    </hgroup>
    <article>
      <p>Contiene un servizio che espone funzionalità di memorizzazione e recupero di informazioni </p>
      <p>Il servizio viene registrato in OSGi tramite Spring DM</p>
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> La registrazione del servizio</h2>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="spring dm">
&lt;osgix:cm-properties id=&quot;dataSourceProperties&quot;
  persistent-id=&quot;sensormix.jpa.persistenceunit&quot;&gt;
  &lt;prop key=&quot;sensormix_db.driverClassName&quot;&gt;org.hsqldb.jdbcDriver&lt;/prop&gt;
  &lt;prop key=&quot;sensormix_db.url&quot;&gt;jdbc:hsqldb:mem:sensormix_db&lt;/prop&gt;
  &lt;prop key=&quot;sensormix_db.username&quot;&gt;sa&lt;/prop&gt;
  &lt;prop key=&quot;sensormix_db.password&quot;&gt;&lt;/prop&gt;
&lt;/osgix:cm-properties&gt;

&lt;osgi:service ref=&quot;sensormixService&quot;&gt;
  &lt;osgi:interfaces&gt;
    &lt;value&gt;com.google.developers.gdgfirenze.service.SensormixService&lt;/value&gt;
    &lt;value&gt;com.google.developers.gdgfirenze.osgi.SensormixAdminInterface&lt;/value&gt;
  &lt;/osgi:interfaces&gt;
&lt;/osgi:service&gt;
</pre>
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> Il servizio in java</h2>
    </hgroup>
    <article class="smaller">
<pre class="prettyprint" data-lang="java">
public class SensormixServiceJpaImpl implements SensormixService, SensormixAdminInterface {

  private EntityManagerFactory entityManagerFactory;

  @Override
  public List&lt;String&gt; listSensorsIds() {
    List&lt;String&gt; result = new ArrayList&lt;String&gt;();

    try {
      EntityManager em = entityManagerFactory.createEntityManager();
      TypedQuery&lt;String&gt; q = em.createQuery(&quot;SELECT s.id FROM JpaSensor s&quot;, String.class);

      result.addAll(q.getResultList());

      em.close();
    } catch (Exception e) {
      logger.log(Level.SEVERE, &quot;Error during sensors list retrieving&quot;, e);
    }

    return result;
  }
</pre>
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> Spring ORM</h2>
    </hgroup>
    <article class="smaller">
<pre class="prettyprint" data-lang="spring dm">
&lt;bean id=&quot;emf&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;
  &lt;property name=&quot;persistenceUnitName&quot; value=&quot;sensormix_db&quot; /&gt;
  &lt;property name=&quot;jpaVendorAdapter&quot;&gt;
    &lt;bean class=&quot;org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter&quot;&gt;
      &lt;property name=&quot;showSql&quot; value=&quot;true&quot; /&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
  &lt;property name=&quot;jpaProperties&quot;&gt;
    &lt;props&gt;
      &lt;prop key=&quot;eclipselink.ddl-generation&quot;&gt;create-tables&lt;/prop&gt;
      &lt;prop key=&quot;eclipselink.logging.level&quot;&gt;INFO&lt;/prop&gt;
      &lt;prop key=&quot;eclipselink.weaving&quot;&gt;false&lt;/prop&gt;
      &lt;prop key=&quot;javax.persistence.jdbc.driver&quot;&gt;${sensormix_db.driverClassName}&lt;/prop&gt;
      &lt;prop key=&quot;javax.persistence.jdbc.url&quot;&gt;${sensormix_db.url}&lt;/prop&gt;
      &lt;prop key=&quot;javax.persistence.jdbc.user&quot;&gt;${sensormix_db.username}&lt;/prop&gt;
      &lt;prop key=&quot;javax.persistence.jdbc.password&quot;&gt;${sensormix_db.password}&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;sensormixService&quot;
  class=&quot;com.google.developers.gdgfirenze.dataservice.SensormixServiceJpaImpl&quot;&gt;
  &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;emf&quot; /&gt;
&lt;/bean&gt;

</pre>
    </article>
  </slide>


  <!-- Integration -->
  <slide class="segue header-green no-back">
    <aside class="gdbar big-green"><img src="images/sensormix_focus_integration.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Integration Bundle</h2>
    </hgroup>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> Il bundle di integrazione</h2>
    </hgroup>
    <article>
      <p>Definisce le rotte Camel per l'ingresso dei campioni da Android, Arduino e iOS</p>
      <p>Utilizza quasi esclusivamente configurazione via Spring XML</p>
      <p>Unica eccezione: la classe <b>SampleAdapter</b> che trasforma da protocol buffer al nostro data model tramite codice java</p>
    </article>
  </slide>


  <slide class="header-green">
    <hgroup>
      <h2> Le rotta di ingresso UDP e HTTP </h2>
      <h3>Usate da Android e da Arduino</h3>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="spring xml">
&lt;route&gt;
  <b>&lt;from uri=&quot;mina2:udp://0.0.0.0:10081&quot; /&gt;</b>
  &lt;to uri=&quot;seda:jsonEntry&quot; /&gt;
&lt;/route&gt;
</pre>

<pre class="prettyprint" data-lang="spring xml">
&lt;route&gt;
  <b>&lt;from uri=&quot;jetty:http://0.0.0.0:10080/sensormixSamplesEndpoint&quot; /&gt;</b>
  &lt;to uri=&quot;seda:jsonEntry&quot; /&gt;

  &lt;setHeader headerName=&quot;Content-Type&quot;&gt;
    <b>&lt;constant&gt;application/json&lt;/constant&gt;</b>
  &lt;/setHeader&gt;
  <b>&lt;to uri=&quot;velocity:vm_templates/json_response_template.vm&quot; /&gt;</b>
&lt;/route&gt;
</pre>
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> La rotta di trasformazione del JSON</h2>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="spring xml">
&lt;route&gt;
  &lt;from uri=&quot;seda:jsonEntry&quot; /&gt;
  &lt;convertBodyTo type=&quot;java.lang.String&quot; /&gt;

  &lt;unmarshal&gt;
    <b>&lt;xmljson elementName=&quot;item&quot; arrayName=&quot;list&quot; rootName=&quot;root&quot; /&gt;</b>
  &lt;/unmarshal&gt;

  <b>&lt;to uri=&quot;xslt:xslt_adapters/raw2cdm_adapter.xsl&quot; /&gt;</b>

  &lt;unmarshal&gt;
    <b>&lt;jaxb contextPath=&quot;com.google.developers.gdgfirenze.service&quot; /&gt;</b>
  &lt;/unmarshal&gt;

  &lt;to uri=&quot;seda:serviceEntry&quot; /&gt;
&lt;/route&gt;
</pre>
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> La rotta TCP + ProtoBuf</h2>
    </hgroup>
    <article class="smaller">
<pre class="prettyprint" data-lang="spring xml">
<b>&lt;bean id=&quot;sampleAdapter&quot; 
  class=&quot;com.google.developers.gdgfirenze.integration.SampleAdapter&quot; /&gt;</b>

&lt;route&gt;
  <b>&lt;from uri=&quot;netty:tcp://0.0.0.0:10082/?decoders=#length-decoder&amp;amp;sync=false&quot; /&gt;</b>
  &lt;unmarshal&gt;
    <b>&lt;protobuf instanceClass=&quot;com.google.developers
      .gdgfirenze.protobuf.SensormixProtos$SampleMessage&quot; /&gt;</b>
  &lt;/unmarshal&gt;
  <b>&lt;bean ref=&quot;sampleAdapter&quot; method=&quot;transform&quot; /&gt;</b>
&lt;/route&gt;
</pre>
<pre class="prettyprint" data-lang="java">
<b>package com.google.developers.gdgfirenze.integration;</b>

public <b>class SampleAdapter</b> {
  public SamplesPayload transform(SampleMessage message) {
    SamplesPayload ret = new SamplesPayload();
    // process 'SampleMessage' and return the adapted 'SamplesPayload'
    return ret;
  }
}
</pre>
    </article>
  </slide>

  <slide class="header-green">
    <hgroup>
      <h2> L'output verso il servizio OSGi</h2>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="spring xml">
&lt;osgi:reference <b>id=&quot;sensormixService&quot;</b>
    interface=&quot;com.google.developers.gdgfirenze.service.SensormixService&quot;
    timeout=&quot;30000&quot; cardinality=&quot;1..1&quot; /&gt;

&lt;route&gt;
  &lt;from uri=&quot;seda:serviceEntry&quot; /&gt;
  <b>&lt;to uri=&quot;bean:sensormixService?method=recordSamples(${body.samples})&quot; /&gt;</b>
&lt;/route&gt;
</pre>

    </article>
  </slide>
  <!-- GWT -->
  <slide class="segue header-green no-back">
    <aside class="gdbar big-green"><img src="images/sensormix_focus_webapp.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Admin WebApp Bundle</h2>
    </hgroup>
  </slide>


  <!-- TODO: Rimanenti su GWT -->


  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/logo_sensormix_c.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Cool Facts</h2>
      <h3>Ovvero perchè ci piace questa architettura</h3>
    </hgroup>
  </slide>

 <slide class="header-dark">
    <hgroup>
      <img style="float:right;margin-top:10px;" src="images/arduino_logo.png" alt="Arduino Logo" title="Arduino Logo" />
      <h2>Integrazione di Arduino</h2>
    </hgroup>
    <article class="flexbox vcenter">
      <img style="height: 100%;" src="images/arduino_circuit.png" alt="Arduino Circuit" title="Arduino Circuit" />
  </article>
  </slide>

  <slide class="header-dark">
    <hgroup>
      <img style="float:right;margin-top:10px;" src="images/arduino_logo.png" alt="Arduino Logo" title="Arduino Logo" />
      <h2>Integrazione di Arduino</h2>
    </hgroup>
    <article class="flexbox vcenter">
      <img style="height: 100%;" src="images/arduino_sheet.png" alt="Arduino Sheet" title="Arduino Sheet" />
    </article>
  </slide>

  <slide class="header-dark">
    <hgroup>
      <img style="float:right;"  src="images/android_logo.png" alt="Android Logo" title="Android Logo"  />
      <h2> 
        Integrazione di Android
      </h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="java">

        HttpPost httppost = new HttpPost(url.toString());
        httppost.setHeader("Content-type", "application/json");

        StringEntity se = new StringEntity(bodyForHttpPostRequest);
        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
            "application/json"));
        httppost.setEntity(se);

        HttpResponse response = httpclient.execute(httppost);
        String temp = EntityUtils.toString(response.getEntity());
        logger.info("JSON post response: " + temp);

      </pre>    
    </article>
  </slide>

  <slide class="header-dark">
    <hgroup>
      <img style="float:right;"  src="images/android_logo.png" alt="Android Logo" title="Android Logo"  />
      <h2> 
        Integrazione di Android - NFC
      </h2>
    </hgroup>
    <article  class="smaller">
      <pre class="prettyprint" data-lang="java">

      Tag tag = getIntent().getParcelableExtra(NfcAdapter.EXTRA_TAG);
      StringBuilder id = new StringBuilder();
      byte[] data = tag.getId();
      for (int i = 0; i &lt; data.length; i++) {
        id.append(String.format("%02x", data[i]));
        if (i &lt; data.length - 1) {
          id.append(":");
        }
      }
      JSONObject jsonSamplePacket = new JSONObject();
      JSONObject obj = new JSONObject();
      jsonSamplePacket.put("sample", obj);
      obj.put("device_id", "the device id");
      obj.put("time", dateFormat.format(new Date()));
      obj.put("nfc", id);
      Intent intent = new Intent(this, DataSenderService.class);
      intent.putExtra(DataSenderService.INTENT_EXTRA,
          jsonSamplePacket.toString());
      startService(intent);
      </pre>    
    </article>
  </slide>




  <slide class="segue no-back nobackground">
    <aside class="gdbar"><img src="images/logo_sensormix_c.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Conclusioni</h2>
      <h3>Considerazioni finali e riferimenti bibliografici</h3>
    </hgroup>
  </slide>

  <slide class="fill nobackground text-on-image" style="background-image: url(images/conclusion_issue.jpg)">
    <hgroup>
      <h2>Issue su GWT</h2>
    </hgroup>
    <article>
      <h3>Serve GWT 2.6.0 che sia reso OSGi ready:</h3>
      <ul class="build">
        <li>per favore aiutateci, votate lo issue sulla Osgify di GWT: 
          <ul><li><a href="http://goo.gl/GEuVBR">http://goo.gl/GEuVBR</a></li></ul></li>
        <li>oppure lo issue su Jira per avere il bundle rilasciato da Servicemix il prima possibile:<br/>
          <ul><li><a href="http://goo.gl/jFsVcP">http://goo.gl/jFsVcP</a></li></ul></li>
      </ul>
    </article>
  </slide>

    <slide class="fill nobackground text-on-image" style="background-image: url(images/conclusion_thales.jpg)">
    <hgroup>
      <h2>Da noi stanno assumendo</h2>
    </hgroup>
    <article class="bigger">
      <ul>
        <li>Novità degli ultimi giorni</li>
        <li>Per lavorare su queste tecnolgie</li>
        <li>2 persone a tempo determinato nel 2014</li>
        <li>Inviare cv a: <ul><li><a href="mailto:cristiano.costantini@thalesgroup.com">cristiano.costantini@thalesgroup.com</a></li></ul></li>
      </ul>
    </article>
  </slide>


  <slide>
    <hgroup>
      <h2>Materiali</h2>
    </hgroup>
    <article class="bigger">
      <dl>
        <dt>Slides:</dt>
        <dd><a href="http://cristcost.github.io/sensormix/">http://cristcost.github.io/sensormix/</a></dd>
        <dt>Sensormix:</dt>
        <dd><a href="https://github.com/cristcost/sensormix/">https://github.com/cristcost/sensormix/</a></dd>
        <dt>Sensormix Android:</dt>
        <dd><a href="https://github.com/cristcost/sensormix-android/">https://github.com/cristcost/sensormix-android/</a></dd>
        <dt>Sensormix Arduino:</dt>
        <dd><a href="https://github.com/michelefi/sensormix-arduino/">https://github.com/michelefi/sensormix-arduino/</a></dd>
      </dl>
    </article>
  </slide>
  
  <slide class="fill white nobackground text-on-dark-image" style="background-image: url(images/conclusion_books.jpg)">
    <hgroup>
      <h2 class="white">Libri</h2>
    </hgroup>
    <article class="bigger">
      <dl>
        <dt>Camel in Action</dt><dd>C. Ibsen, J. Anstey - Manning</dd>
        <dt>Enterprise Integration Patterns</dt><dd>G. Hohpe, B. Woolf - Addison Wesley</dd>
        <dt>Spring DM in Action</dt><dd>A. Cogoluègnes, T. Templier, A. Piper - Manning</dd>
        <dt>OSGi in Action</dt><dd>R. S. Hall, K. Pauls, S. McCulloch, D. Savage - Manning</dd>
        <dt>OSGi In depth</dt><dd>Alexandre de Castro Alves - Manning</dd>
      </dl>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Links</h2>
    </hgroup>
    <article class="bigger">
      <dl>     
      <dt>Apache Camel:</dt>
      <dd><a href="http://camel.apache.org/">http://camel.apache.org/</a></dd>
      <dt>Apache Servicemix:</dt>
      <dd><a href="http://servicemix.apache.org/">http://servicemix.apache.org/</a></dd>
      <dt>Apache Karaf:</dt>
      <dd><a href="http://karaf.apache.org/">http://karaf.apache.org/</a></dd>
      <dt>GWT:</dt>
      <dd><a href="http://www.gwtproject.org/">http://www.gwtproject.org/</a></dd>
      </dl>
    </article>
  </slide>


  <slide>
    <article class="flexbox vcenter">
      <div>
        <h2 style="font-size:10em;">Q&amp;A</h2>
      </div>
    </article>
  </slide>




  <slide class="thank-you-slide segue nobackground">
    <aside class="gdbar right"><img src="images/logo_sensormix_c.png"></aside>
    <article class="flexbox vleft auto-fadein">
      <h2>&lt;Thank You!&gt;</h2>
    </article>
    <p class="auto-fadein">
        Cristiano Costantini <span style="font-size:0.5em;">cristiano.costantini@gmail.com</span><br/>
        Giuseppe Gerla <span style="font-size:0.5em;">giuseppe.gerla@gmail.com</span><br/>
        Michele Ficarra <span style="font-size:0.5em;">miche.ficarra@gmail.com</span><br/>
        Sergio Ciampi <span style="font-size:0.5em;">sergio.ciampi@gmail.com</span><br/>
        Stefano Cigheri <span style="font-size:0.5em;">stefano.cigheri@gmail.com</span><br/>
    </p>
  </slide>

  <slide class="logoslide dark nobackground">
    <article class="flexbox vcenter">
      <span><img src="images/gdg_firenze_logo.png"></span>
    </article>
  </slide>

  <slide class="backdrop"></slide>

</slides>

<script>

</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
